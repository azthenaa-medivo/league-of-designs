{% extends "base.html" %}

{% block title %}
Rioters -
{% endblock %}

{% block header %}
    <h1>The Rioters</h1>
{% endblock %}

{% block contents %}
    {% load staticfiles %}
    {% load template_tags %}
    <table id="rioters-table">
        <thead>
            <th>Name</th>
            <th>Posts</th>
            <th>Latest Red Post</th>
        </thead>
        <tfoot>
            <th>Name</th>
            <th>Posts</th>
            <th>Latest Red Post</th>
        </tfoot>
        <tbody>
            {% for r in rioters %}
            <tr>
                <td><a class="rioter" href="{% url "rioter" r.url_id %}">{{r.name}}</a></td>
                <td data-order="{{r.glorious_posts|int}}">{% if r.glorious_posts == 0 %}{{r.total_posts|int}} Red Posts{% else %}{{r.total_posts|int}} Red Posts (<span class="rioter">{{r.glorious_posts|int}}</span> about Design){% endif %}</td>
                <td>
                    In <a href="{{r.last_post.url}}">{{r.last_post.thread}}</a>
                    ({% include "utils/date_span.html" with date=r.last_post.date|isoformat %})
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block js %}
    <script>
     $(document).ready(function() {
        var rioterTable = $('#rioters-table').DataTable({
                "order": [[ 1, "desc" ]],
                "language": {
                    "zeroRecords": 'Hm ? Ah come on, Rioters are pretty silent..'
                },
                "dom": '<"top"flpi>rt<"bottom"flpi><"clear">',
                "searchHighlight": true,
            });
    });
    </script>
{% endblock %}